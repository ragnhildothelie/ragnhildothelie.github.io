<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaflet Kart med Posisjon</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.84.2/dist/L.Control.Locate.min.css">
    <style>
        #map { height: 100vh; }
    </style>
</head>
<body>
<div id="map"></div>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.84.2/dist/L.Control.Locate.min.js"></script>

<script>
    const tile_size = L.point(2488, 1959)
    const bbox = null //L.latLngBounds (vv_ll,vv_ur)
    const epsg_crs = L.CRS.EPSG4326
    const start_opacity = 50;

    // Middelhøyvann nå
    var middelhoyvann_klimaarna = L.tileLayer.wms('https://wms.geonorge.no/skwms1/wms.stormflo_havniva?', {
        layers: 'middelhoyvann_klimaarna',
        name: 'Middelhøyvann nå',
        format: 'image/png',
        crs: epsg_crs,
        version: '1.3.0',
        transparent: true,
        tileSize: tile_size,
        tiled: true,
        bounds: bbox,
        opacity: start_opacity
    })

    // Middelhøyvann i år 2100
    var middelhoyvann_klimaar2100 = L.tileLayer.wms('https://wms.geonorge.no/skwms1/wms.stormflo_havniva?', {
        layers: 'middelhoyvann_klimaar2100',
        name: 'Middelhøyvann i år 2100',
        format: 'image/png',
        crs: epsg_crs,
        version: '1.3.0',
        transparent: true,
        tileSize: tile_size,
        tiled: true,
        bounds: bbox,
        opacity: start_opacity
    })

    // Middelhøyvann i år 2150
    const middelhoyvann_klimaar2150 = L.tileLayer.wms('https://wms.geonorge.no/skwms1/wms.stormflo_havniva?', {
        layers: 'middelhoyvann_klimaar2150',
        name: 'Middelhøyvann i år 2150',
        format: 'image/png',
        crs: epsg_crs,
        version: '1.3.0',
        transparent: true,
        tileSize: tile_size,
        tiled: true,
        bounds: bbox,
        opacity: start_opacity
    })

    // 1000-års stormflo i dag
    const stormflo1000ar_klimaarna = L.tileLayer.wms('https://wms.geonorge.no/skwms1/wms.stormflo_havniva?', {
        layers: 'stormflo1000ar_klimaarna',
        name: '1000-års stormflo i dag',
        format: 'image/png',
        crs: epsg_crs,
        version: '1.3.0',
        transparent: true,
        tileSize: tile_size,
        tiled: true,
        bounds: bbox,
        opacity: start_opacity
    })

    // 1000-års stormflo i år 2100
    const stormflo1000ar_klimaar2100 = L.tileLayer.wms('https://wms.geonorge.no/skwms1/wms.stormflo_havniva?', {
        layers: 'stormflo1000ar_klimaar2100',
        name: '1000-års stormflo i år 2100',
        format: 'image/png',
        crs: epsg_crs,
        version: '1.3.0',
        transparent: true,
        tileSize: tile_size,
        tiled: true,
        bounds: bbox,
        opacity: start_opacity
    })

    // 20-års stormflo i dag
    const stormflo20ar_klimaarna = L.tileLayer.wms('https://wms.geonorge.no/skwms1/wms.stormflo_havniva?', {
        layers: 'stormflo20ar_klimaarna',
        name: '20-års stormflo i dag',
        format: 'image/png',
        crs: epsg_crs,
        version: '1.3.0',
        transparent: true,
        tileSize: tile_size,
        tiled: true,
        bounds: bbox,
        opacity: start_opacity
    })

    // 200-års stormflo i dag
    const stormflo200ar_klimaarna = L.tileLayer.wms('https://wms.geonorge.no/skwms1/wms.stormflo_havniva?', {
        layers: 'stormflo200ar_klimaarna',
        name: '200-års stormflo i dag',
        format: 'image/png',
        crs: epsg_crs,
        version: '1.3.0',
        transparent: true,
        tileSize: tile_size,
        tiled: true,
        bounds: bbox,
        opacity: start_opacity
    })

    // 200-års stormflo i år 2100
    const stormflo200ar_klimaar2100 = L.tileLayer.wms('https://wms.geonorge.no/skwms1/wms.stormflo_havniva?', {
        layers: 'stormflo200ar_klimaar2100',
        name: '200-års stormflo i år 2100',
        format: 'image/png',
        crs: epsg_crs,
        version: '1.3.0',
        transparent: true,
        tileSize: tile_size,
        tiled: true,
        bounds: bbox,
        opacity: start_opacity
    })

    // Øvre estimat stormflo i dag
    const stormfloovreestimat_klimaarna = L.tileLayer.wms('https://wms.geonorge.no/skwms1/wms.stormflo_havniva?', {
        layers: 'stormfloovreestimat_klimaarna',
        name: 'Øvre estimat stormflo i dag',
        format: 'image/png',
        crs: epsg_crs,
        version: '1.3.0',
        transparent: true,
        tileSize: tile_size,
        tiled: true,
        bounds: bbox,
        opacity: start_opacity
    })

    // Øvre estimat stormflo i år 2100
    const stormfloovreestimat_klimaar2100 = L.tileLayer.wms('https://wms.geonorge.no/skwms1/wms.stormflo_havniva?', {
        layers: 'stormfloovreestimat_klimaar2100',
        name: 'Øvre estimat stormflo i år 2100',
        format: 'image/png',
        crs: epsg_crs,
        version: '1.3.0',
        transparent: true,
        tileSize: tile_size,
        tiled: true,
        bounds: bbox,
        opacity: start_opacity
    })

    // Øvre estimat stormflo i år 2150
    const stormfloovreestimat_klimaar2150 = L.tileLayer.wms('https://wms.geonorge.no/skwms1/wms.stormflo_havniva?', {
        layers: 'stormfloovreestimat_klimaar2150',
        name: 'Øvre estimat stormflo i år 2150',
        format: 'image/png',
        crs: epsg_crs,
        version: '1.3.0',
        transparent: true,
        tileSize: tile_size,
        tiled: true,
        bounds: bbox,
        opacity: start_opacity
    })

    // Basemap
    const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    });

    // Initialiser kartet
    let  map = L.map('map').setView([60, 10], 5);

    L.control
        .locate({
            strings: {
                title: "Show me where I am, yo!"
            }
        })
        .addTo(map);

    const basemaps = {
        'Open street map': osm
    }

    const overlays = {
        'Middelhøyvann nå': middelhoyvann_klimaarna,
        'Middelhøyvann i år 2100': middelhoyvann_klimaar2100,
        'Middelhøyvann i år 2150': middelhoyvann_klimaar2150,
        '1000-års stormflo i dag': stormflo1000ar_klimaarna,
        '1000-års stormflo i år 2100': stormflo1000ar_klimaar2100,
        '20-års stormflo i dag': stormflo20ar_klimaarna,
        '200-års stormflo i dag': stormflo200ar_klimaarna,
        '200-års stormflo i år 2100': stormflo200ar_klimaar2100,
        'Øvre estimat stormflo i dag': stormfloovreestimat_klimaarna,
        'Øvre estimat stormflo i år 2100': stormfloovreestimat_klimaar2100,
        'Øvre estimat stormflo i år 2150': stormfloovreestimat_klimaar2150
    }

    L.control.layers(overlays).addTo(map);
    osm.addTo(map);

</script>
</body>
</html>